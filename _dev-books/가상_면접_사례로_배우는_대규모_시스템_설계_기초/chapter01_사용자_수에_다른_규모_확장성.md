# chapter01. 사용자 수에 다른 규모 확장성

## 1. 단일 서버

- 웹, 앱, DB, 캐시 등 모든 서버가 한 대에서 실행되는 구조를 말한다.
- 요청의 처리 흐름
  1. DNS 에 도메인 이름에 매핑된 IP 주소를 요청한다.
  2. DNS 로 부터 응답받은 IP 주소로 HTTP 요청을 보낸다.
  3. 요청받은 웹서버는 HTML 페이지 또는 JSON 형태로 응답을 받는다.

<br>

## 2. 데이터베이스

- 사용자의 요청이 증가하면 서버 한대로는 부족하기 때문에 별도의 역할을 담당하는 서버를 구성한다.
- 데이터베이스 종류
  - **관계형 데이터베이스** : 열과 컬럼으로 구성된 데이터 베이스이다.
  - **비관계형 데이터베이스** : 관계형 데이터베이스를 제외한 나머지 유형의 데이터베이스를 총칭하는 말. NoSQL 이라고도 부른다.
    - 예시 : CouchDB, Neo4j, Cassandra, HBase, Amazon DynamoDB 가 있다.
    - 종류 : key-value store, graph store, column store, document store 가 있다.
- 아래와 같은 경우에 대한 고려 사항이 있을 경우 NoSQL 을 사용하도록 하자.
  - 낮은 응답 지연시간(latency)
  - 다루는 데이터가 비정형의 형태인 경우
  - 데이터(JSON, YAML, XML 등) 을 직렬화하거나 역직렬화 할 수 있기만 한 경우
  - 빅데이터의 경우

<br>

## 3. 수직적 규모 확장 vs 수평적 규모 확장

**`scale up`**

- 서버에 고사양의 자원을 추가하는 행위 (e.g. 더 좋은 CPU, 더 좋은 RAM)
- 서버로 유입되는 트래픽 양이 적을 때 좋은 선택이다.
- 단순한 것이 장점이지만 심각한 단점이 많다.
- 단점
  - 한 대에 서버에 자원을 무한대로 증설할 수 없다.
  - 자동복구(failover) 또는 다중화(redundancy) 방안이 없어 장애가 발생하면 서비스가 중단된다.

<br>

**`scale out`**

- 더 많은 서버를 추가하여 성능을 개선하는 행위
- 대규모 서비스 또는 서비스의 지속성 측면에서는 수평적 규모 확장이 적합한 방법이다.

<br>

## 4. 로드 밸런서(load balancer)

- 역할 : 부하 분산 집합(load balancing set) 에 속한 웹 서버들에게 트래픽을 고르게 분산하는 역할을 한다.
- 동작 방식 : 클라이언트가 로드밸런서의 public IP address 로 접속하면 load balancer 는 private IP address 로 트래픽을 분산시킨다.

<br>

## 5. 데이터베이스 다중화

- 어려 DB 서버를 운영하는 방식을 말한다.
- Master-Slave 관계를 설정하고 데이터 원본은 Master 에서, 사본은 Slave 에서 저장하는 방식을 사용한다.
